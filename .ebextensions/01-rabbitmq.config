commands:
  01_chmod_to_postdeploy_hook:
    command: "chmod +x .platform/hooks/postdeploy/connect_spring_to_network.sh"
  02_create_network_if_not_exists:
    command: "docker network ls | grep -q mynetwork || docker network create mynetwork"
  03_run_rabbitmq:
    command: "docker run -d --name rabbitmq --network mynetwork -p 5672:5672 -p 15672:15672 -p 61613:61613 --restart=unless-stopped rabbitmq:management"
    test: "[[ ! $(docker ps -q -f name=rabbitmq) ]]"
  04_enable_rabbitmq:
    command: "docker exec rabbitmq bash -c 'rabbitmq-plugins enable rabbitmq_stomp && rabbitmq-plugins enable rabbitmq_management'"